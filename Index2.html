</main>
    <body>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

        <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.0.0/dist/tf.min.js"></script>

        
        <input type="file" id="inputImage">
        <button type="button" onclick="predecir()">Cargar imagen y predecir</button>  
        <br>

        <div id="canvas-container">
            <canvas id="imagen"></canvas>
        </div>

    <script type="text/javascript">
        
        
        
            function predecir() {
                var input = document.getElementById("inputImage");
                var canvas = document.getElementById("imagen");
                var ctx1 = canvas.getContext("2d");
                var img = new Image();
                img.onload = function() {
                canvas.width = img.width;
                canvas.height = img.height;
                ctx1.drawImage(img, 0, 0);
                };
                img.src = URL.createObjectURL(input.files[0]);
            
                var imgData = ctx1.getImageData(0,0,28,28);
                var arr = [];
                var arr28 = [];

                for (var i=0, c=0; i < imgData.data.length; i+=4){
                    var valor = imgData.data[i]/255;
                    arr28.push([valor]);
                    if (arr28.length == 28) {
                        arr.push(arr28); 
                        arr28 = [];
                    }
                }

                arr = [arr];

                var tensor4 = tf.tensor4d(arr);
                var resultados = modelo.predict(tensor4).dataSync();
                
                for( var i = 0; i<=9; i++){
                    console.log(resultados[i]); 
                } 

                console.log("Prediccion: " + resultados);
                document.getElementById("resultado").innerHTML = mayorIndice;

            }

            var modelo = null;

        (async () => {
            console.log("Cargando modelo...");
            modelo = await tf.loadLayersModel("model.json");
            console.log("Modelo cargado...");
        })();
    </script>
        
    <script type="text/javascript">

        
    </script>

    </body>
</html>